<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>용산구 지도</title>
    
    <!-- 네이버 지도 API (보안 설정 완료됨) -->
    <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=u5mtazxcnw"></script>
    
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: 'Pretendard', sans-serif; }
        #map { width: 100%; height: 100vh; }
        
        /* 말풍선(정보창) 디자인 */
        .iw-container { 
            padding: 12px;
            min-width: 200px;
            background-color: white; 
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .iw-title { 
            font-size: 15px;
            font-weight: 700; 
            color: #222; 
            margin-bottom: 4px;
            display: block;
            text-align: center;
        }
        .iw-desc {
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
            display: block;
            text-align: center;
        }
        .iw-btn {
            display: block;
            text-align: center;
            background-color: #03c75a;
            color: white;
            padding: 8px 0;
            text-decoration: none;
            font-size: 12px;
            border-radius: 4px;
            font-weight: 600;
        }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    // 1. 구글 시트 데이터 붙여넣는 곳
    // 수식: ="{ ""title"": """ & B2 & """, ""category"": """ & C2 & """, ""date"": """ & TEXT(D2, "yyyy년 mm월 dd일") & """, ""lat"": " & F2 & ", ""lng"": " & G2 & " },"
    const myLocations = [
        { "title": "스미비 하츠", "category": "일식", "date": "2022년 05월 01일", "lat": 37.5321161, "lng": 127.0056662 },
        { "title": "BOLLE COFFEE(볼리커피)", "category": "카페", "date": "2023년 11월 20일", "lat": 37.5404779, "lng": 126.9726383 }
        // ... 여기에 구글 시트 I열의 결과값들을 덮어씌우세요 ...
    ];

    var map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(myLocations[0].lat, myLocations[0].lng),
        zoom: 14
    });

    myLocations.forEach(function(loc) {
        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(loc.lat, loc.lng),
            map: map,
            title: loc.title,
            animation: naver.maps.Animation.DROP
        });

        // 2. 정보창 내용 구성 (업종, 날짜 표시)
        var categoryText = loc.category ? loc.category : "";
        var dateText = loc.date ? " (개업: " + loc.date + ")" : "";
        var fullDesc = categoryText + dateText;
        
        // 설명이 둘 다 없을 경우를 대비
        if (fullDesc === "") fullDesc = "상세 정보 없음";

        var infoContent = [
            '<div class="iw-container">',
            '   <span class="iw-title">' + loc.title + '</span>',
            '   <span class="iw-desc">' + fullDesc + '</span>',
            '   <a href="https://map.naver.com/v5/search/' + encodeURIComponent(loc.title) + '" target="_blank" class="iw-btn">네이버 지도 상세보기</a>',
            '</div>'
        ].join('');

        var infowindow = new naver.maps.InfoWindow({
            content: infoContent,
            borderWidth: 0,
            disableAnchor: false,
            backgroundColor: "transparent",
            pixelOffset: new naver.maps.Point(0, -5)
        });

        naver.maps.Event.addListener(marker, "click", function() {
            if (infowindow.getMap()) {
                infowindow.close();
            } else {
                infowindow.open(map, marker);
            }
        });
    });
</script>
</body>
</html>
